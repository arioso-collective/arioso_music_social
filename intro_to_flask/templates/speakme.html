{% extends "layout.html" %}

{% block content %}
    <h2>
        Speak me
    </h2>

    {% if success %}
        <p> 
            <b> Here is the audio:  </b> 
        </p>
        <audio controls autoplay>
            <source src="{{ url_for('static', filename=speech_response) }}?t={{ timestamp  }}" type="audio/mpeg">
            Your browser does not support the audio element.
        </audio>
    {% else %}  
        {% for prompt in form.prompt.errors %}
            <div class="flash">{{ prompt }}</div>
        {% endfor %}

        <form action="{{ url_for('speakme') }}" method=post>
            <!-- 
            This form has no CSRF protection.  To add, see:
            https://flask-wtf.readthedocs.io/en/0.15.x/csrf/
            --> 

            {{ form.prompt.label }}
            {{ form.prompt }}

            {{ form.submit }}
            <p> It will likely take a few seconds for the speech to appear.   </p>
        </form>
    {% endif %}

{% endblock %}